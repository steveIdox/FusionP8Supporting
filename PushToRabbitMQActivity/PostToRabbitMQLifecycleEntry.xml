<lifecycle name="ProjectDocumentLifecycle" lifecycle-object="ProjectDocument" xmlns:a="http://www.idoxgroup.com/fusion/configuration/lifecycles/activities" xmlns="http://www.idoxgroup.com/fusion/configuration/lifecycles">
  <state name="Work In Progress" posX="0" posY="0">
    <!-- Custom activity for PDF watermark -->
    <to state="Work In Progress" name="postToRabbitMQ" condition="ProjectDocument.PrimaryAttachmentName like '%.pdf' OR ProjectDocument.PrimaryAttachmentName like '%.PDF'">
      <text>Set watermark to PDF</text>
      <required-command-code>Amend</required-command-code>
      <activities>
        <!-- Mandatory parameters -->
        <a:set-context-parameter parameter-name="RabbitMQ:Host" value="localhost" />
        <a:set-context-parameter parameter-name="RabbitMQ:Port" value="5672\" />
        <a:set-context-parameter parameter-name="RabbitMQ:Username" value="guest" />
        <a:set-context-parameter parameter-name="RabbitMQ:Password" value="guest" />
        <a:set-context-parameter parameter-name="RabbitMQ:VirtualHost" value="/" />
        <!-- leave Queue Name blank to use default queue -->
        <a:set-context-parameter parameter-name="RabbitMQ:QueueName" value="" />
        <a:invoke-custom-activity name="">
          <a:type>idox.eim.fusionp8.customactivities.PushToRabbitMQActivity</a:type>
          <a:assembly>PushToRabbitMQActivity</a:assembly>
        </a:invoke-custom-activity>
      </activities>
    </to>
  </state>
  <referenced-objects></referenced-objects>
</lifecycle>